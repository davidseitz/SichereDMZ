# Use public pool
pool pool.ntp.org iburst

# Allow the system to step the system clock during the first 10 updates
# if its offset is larger than 10 seconds.
initstepslew 10 pool.ntp.org

# Record the rate at which the system clock gains/losses time.
driftfile /var/lib/chrony/chrony.drift

# Enable kernel synchronization of the real-time clock (RTC).
rtcsync

# --- VITAL FIXES BELOW ---

bindaddress 10.10.30.4

# 1. Allow incoming connections. 
# "allow" with no arguments allows all IPv4/IPv6.
# Or specify your subnet: allow 192.168.0.0/16
allow

# 2. (Optional) If running in a container, you might need to force 
# binding to the wildcard address if it's trying to bind to IPv6 only.
bindcmdaddress 127.0.0.1
bindcmdaddress ::1

local stratum 10

# cmdport 0 disables the command port (323). 
# Keep this 0 if you don't need remote management via chronyc.
cmdport 0
